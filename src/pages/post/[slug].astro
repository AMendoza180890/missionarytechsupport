---
import Layout from "~/layouts/Layout.astro";
import Section from "~/components/Section.astro";
import Heading from "~/components/Heading.astro";
// import { getCollection } from "astro:content";
import Newsletter from "~/components/Newsletter.astro";
import { getPostInfo } from "~/lib/wp.ts";

const slug = Astro.params.slug;
console.log("el slug es: " + slug);
if (!slug) {
  return Astro.redirect("/404");
}

const { title, content } = await getPostInfo(slug);

---

<Layout title={title}>
  <Section class:list={"container py-1 lg:py-1"} contain={false}>
    <article class="prose lg:prose-xl mx-auto">
      <h1 class="font-black">{title}</h1>
        <div class="text-gray-700" set:html={content}></div>
    </article>
    </Section>
    <hr class="w-60 h-1 mx-auto my-4 bg-gray-700 border-0 rounded-sm md:my-10 dark:bg-gray-700">
    <Newsletter />
</Layout>